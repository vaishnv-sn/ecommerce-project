<div class='container mt-5 p-3 rounded cart'>
    <div class='row no-gutters'>
        <div class='col-md-8'>
            <table class='table mt-5'>
                <thead>
                    <tr>
                        <th scope='col'>Date</th>
                        <th scope='col'>Status</th>
                        <th scope='col'>Payment Method</th>
                        <th scope="col">Amount</th>
                        <th scope="col">view order</th>
                        <th scope="col">Cancel</th>
                    </tr>
                </thead>
                <tbody>
                    {{#each orders}}
                        <tr>
                            <td>{{this.deliveryDetails.date}}</td>
                            <td id="status">{{this.status}}</td>
                            <td>{{this.paymentMethod}}</td>
                            <td>{{this.totalAmount}}</td>
                            <td>
                                <a class="btn btn-info" href="/order-details">View Details</a>
                            </td>
                            <td>
                                <button class="btn btn-danger" onclick="cancelOrder('{{this._id}}')">Cancel</button>
                            </td>
                        </tr>
                    {{/each}}
                </tbody>
            </table>
        </div>     
    </div>
</div>

<script>
    function cancelOrder(orderId){
        console.log(orderId)
        $.ajax({
            url:'/cancel-order',
            data:{orderId:orderId},
            method:'post',
            success:(response)=>{
                if(response.status){
                    location.reload()
                }
            }
        })
    }
</script>